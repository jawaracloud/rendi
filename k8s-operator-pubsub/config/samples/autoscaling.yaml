apiVersion: pubsub.jawaracloud.io/v1
kind: PubSubChannel
metadata:
  name: autoscaling-channel
spec:
  channelName: events
  redisAddress: dragonfly:6379
  replicas: 2
  autoScaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 20
    targetQueueDepth: 100
    scaleUpThreshold: 150
    scaleDownThreshold: 50
    cooldownPeriod: 60
  resources:
    limits:
      cpu: "500m"
      memory: "256Mi"
    requests:
      cpu: "100m"
      memory: "128Mi"
  env:
  - name: LOG_LEVEL
    value: "info"
  - name: BATCH_SIZE
    value: "100"
